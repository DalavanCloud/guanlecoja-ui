(function(){_.mixin(_.str.exports()),angular.module("guanlecoja.ui",["ui.bootstrap","ui.router"])}).call(this),function(){var t;t=function(){function t(t){this.$rootScope=t}return t.prototype.setBreadcrumb=function(t){return this.$rootScope.$broadcast("glBreadcrumb",t)},t}(),angular.module("guanlecoja.ui").service("glBreadcrumbService",["$rootScope",t])}.call(this),function(){var t;t=function(){function t(){this.groups={},this.footer=[]}return t.prototype.appTitle="set AppTitle using GlMenuServiceProvider.setAppTitle",t.prototype.addGroup=function(t){return t.items=[],null==t.order&&(t.order=99),this.groups[t.name]=t,this.groups},t.prototype.setFooter=function(t){return this.footer=t},t.prototype.setAppTitle=function(t){return this.appTitle=t},t.prototype.$get=["$state",function(t){var i,e,n,r,o,a,s,l,u,c;for(u=t.get().slice(1),s=0,l=u.length;l>s;s++)if(a=u[s],i=a.data.group,null!=i){if(!this.groups.hasOwnProperty(i))throw Error("group "+i+" has not been defined with glMenuProvider.group(). has: "+_.keys(this.groups));this.groups[i].items.push({caption:a.data.caption||_.string.humanize(a.name),sref:a.name})}c=this.groups;for(r in c)i=c[r],0===i.items.length?delete this.groups[r]:1===i.items.length?(n=i.items[0],i.caption=n.caption,i.sref=n.sref,i.items=[]):i.sref=".";return e=_.values(this.groups),e.sort(function(t,i){return t.order-i.order}),o=this,{getGroups:function(){return e},getFooter:function(){return o.footer},getAppTitle:function(){return o.appTitle}}}],t}(),angular.module("guanlecoja.ui").provider("glMenuService",[t])}.call(this),function(){var t,i;t=function(){function t(t){t.responseInterceptors.push("glHttpInterceptor")}return t}(),i=function(){function t(t,i,e){return function(n){var r;return r=function(n){var r,o;try{o=""+n.status+":"+n.data.error+" "+("when:"+n.config.method+" "+n.config.url)}catch(a){r=a,o=n.toString()}return e(function(){return t.network(o)},100),i.reject(n)},n.then(angular.identity,r)}}return t}(),angular.module("guanlecoja.ui").config(["$httpProvider",t]).factory("glHttpInterceptor",["glNotificationService","$q","$timeout",i])}.call(this),function(){var t;t=function(){function t(t,i){this.$rootScope=t,this.$timeout=i,this.notifications=[],this.curid=0}return t.prototype.notify=function(t){var i,e,n,r;if(this.curid+=1,null==t.title&&(t.title="Info"),t.id=this.curid,e=this.curid,null!=t.group){r=this.notifications;for(i in r)n=r[i],t.group===n.group&&(e=i,n.msg+="\n"+t.msg)}return e===this.curid&&this.notifications.push(t),null},t.prototype.error=function(t){return null==t.title&&(t.title="Error"),this.notify(t)},t.prototype.network=function(t){return null==t.title&&(t.title="Network issue"),null==t.group&&(t.group="Network"),this.notify(t)},t.prototype.dismiss=function(t){var i,e,n;n=this.notifications;for(i in n)if(e=n[i],e.id===t)return this.notifications.splice(i,1),null;return null},t}(),angular.module("guanlecoja.ui").service("glNotificationService",["$rootScope","$timeout",t])}.call(this),function(){var t,i;t=function(){function t(){return{replace:!0,transclude:!0,restrict:"E",scope:!1,controllerAs:"n",templateUrl:"guanlecoja.ui/views/notification.html",controller:"_glNotificationController"}}return t}(),i=function(){function t(t,i,e){this.$scope=t,this.glNotificationService=i,this.dropdownService=e,this.notifications=this.glNotificationService.notifications}return t.prototype.dismiss=function(t,i){return this.glNotificationService.dismiss(t),i.stopPropagation(),null},t.prototype.toggle=function(){return this.$scope.isOpen=!0,this.dropdownService.open(this.$scope),null},t}(),angular.module("guanlecoja.ui").directive("glNotification",[t]).controller("_glNotificationController",["$scope","glNotificationService","dropdownService",i])}.call(this),function(){var t,i;t=function(){function t(){return{replace:!0,transclude:!0,restrict:"E",scope:!1,controllerAs:"page",templateUrl:"guanlecoja.ui/views/page_with_sidebar.html",controller:"_glPageWithSidebarController"}}return t}(),i=function(){function t(t,i,e){this.$scope=t,this.$timeout=e,this.groups=i.getGroups(),this.footer=i.getFooter(),this.appTitle=i.getAppTitle(),this.activeGroup=null,this.inSidebar=!1,this.sidebarActive=!1}return t.prototype.toggleGroup=function(t){return this.activeGroup=this.activeGroup!==t?t:null},t.prototype.enterSidebar=function(){return this.sidebarActive=!0,this.inSidebar=!0},t.prototype.leaveSidebar=function(){return this.inSidebar=!1,null!=this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=void 0),this.timeout=this.$timeout(function(t){return function(){return t.inSidebar?void 0:(t.sidebarActive=!1,t.activeGroup=null)}}(this),500)},t}(),angular.module("guanlecoja.ui").directive("glPageWithSidebar",[t]).controller("_glPageWithSidebarController",["$scope","glMenuService","$timeout",i])}.call(this),function(){var t,i;t=function(){function t(){return{replace:!0,transclude:!0,restrict:"E",scope:!1,controllerAs:"page",templateUrl:"guanlecoja.ui/views/topbar.html",controller:"_glTopbarController"}}return t}(),i=function(){function t(t,i,e){t.appTitle=i.getAppTitle(),t.$on("$stateChangeStart",function(i,n){return t.breadcrumb=[{caption:_.humanize(n.name),href:"#"+e.hash()}]}),t.$on("glBreadcrumb",function(i,e){return t.breadcrumb=e})}return t}(),angular.module("guanlecoja.ui").directive("glTopbar",[t]).controller("_glTopbarController",["$scope","glMenuService","$location",i])}.call(this),angular.module("guanlecoja.ui").run(["$templateCache",function(t){t.put("guanlecoja.ui/views/notification.html",'<li ng-class="{ active: isOpen }" class="dropdown notifications"><a ng-click="n.toggle()"><i ng-class="{\'fa-ringing\': n.notifications.length &gt; 0 }" class="fa fa-bell-o fa-lg"></i></a><ul class="dropdown-menu dropdown-menu-right"><li class="dropdown-header">Notifications</li><li class="divider"></li><div ng-repeat="msg in n.notifications"><li><div class="item"><button ng-click="n.dismiss(msg.id, $event)" class="close">&times;</button><div class="title">{{msg.title}}:</div><div class="msg">{{msg.msg}}</div></div></li><li class="divider"></li></div><li ng-hide="n.notifications.length&gt;0"><div class="item"><small class="msg"> all caught up!</small></div></li></ul></li>'),t.put("guanlecoja.ui/views/page_with_sidebar.html",'<div ng-class="{\'active\': page.sidebarActive}" class="gl-page-with-sidebar"><div ng-mouseenter="page.enterSidebar()" ng-mouseleave="page.leaveSidebar()" class="sidebar sidebar-blue"><ul><li class="sidebar-main"><a href="#" ng-click="page.sidebarActive=!page.sidebarActive">{{page.appTitle}}<span class="menu-icon fa fa-bars"></span></a></li><li class="sidebar-title"><span>NAVIGATION</span></li><div ng-repeat="group in page.groups"><div ng-if="group.items.length &gt; 0"><li class="sidebar-list"><a ng-click="page.toggleGroup(group)"><i class="fa fa-angle-right"></i>&nbsp;{{group.caption}}<span ng-class="\'fa-\' + group.icon" class="menu-icon fa"></span></a></li><li ng-class="{\'active\': page.activeGroup==group}" ng-repeat="item in group.items" class="sidebar-list subitem"><a ui-sref="{{item.sref}}">{{item.caption}}</a></li></div><div ng-if="group.items.length == 0"><li class="sidebar-list"><a ui-sref="{{group.sref}}" ng-click="page.toggleGroup(group)">{{group.caption}}<span ng-class="\'fa-\' + group.icon" class="menu-icon fa"></span></a></li></div></div></ul><div class="sidebar-footer"><div ng-repeat="item in page.footer" class="col-xs-4"><a ng-href="{{item.href}}">{{item.caption}}</a></div></div></div><div class="content"><div ng-transclude="ng-transclude"></div></div></div>'),t.put("guanlecoja.ui/views/topbar.html",'<div class="navbar navbar-default navbar-static-top"><div class="container-fluid"><a class="navbar-brand">{{appTitle}}</a><ol class="breadcrumb"><li ng-repeat="b in breadcrumb"><a ng-if="b.sref" ui-sref="{{b.sref}}">{{b.caption}}</a><a ng-if="b.href" ng-href="{{b.href}}">{{b.caption}}</a><span ng-if="b.href == undefined &amp;&amp; b.sref == undefined" ng-href="{{b.href}}">{{b.caption}}</span></li></ol><ul ng-transclude="ng-transclude" class="nav navbar-nav pull-right"></ul></div></div>')}]);
//# sourceMappingURL=scripts.js.map